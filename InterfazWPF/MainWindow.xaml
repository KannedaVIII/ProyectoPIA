<Window x:Class="InterfazWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:InterfazWPF"
        mc:Ignorable="d"
        Title="Biblioteca Videojuegos" Height="650" Width="1100"
        WindowStartupLocation="CenterScreen"
        FontFamily="Segoe UI" Background="#F0F2F5">

    <Window.Resources>
        <Style x:Key="MenuButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#D1D5DB"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Height" Value="50"/>
            <Setter Property="Margin" Value="0,5,0,5"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="Padding" Value="20,0,0,0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="5">
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Left" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#374151"/>
                    <Setter Property="Foreground" Value="White"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SearchTextBoxStyle" TargetType="TextBox">
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="13"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="#1F2937">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="10,20,10,20">
                    <TextBlock Text="Biblioteca Juegos" Foreground="White" FontSize="18" FontWeight="Bold" 
                               HorizontalAlignment="Center" Margin="0,0,0,30" Opacity="0.9"/>

                    <Button x:Name="btnMostrar" Content="📊  Sincronizar API" Style="{StaticResource MenuButtonStyle}" Click="btnMostrar_Click"/>
                    <Button x:Name="btnAnadir" Content="➕  Añadir Juego" Style="{StaticResource MenuButtonStyle}" Click="btnAnadir_Click"/>
                    <Button x:Name="btnEliminar" Content="🗑  Eliminar" Style="{StaticResource MenuButtonStyle}" Click="btnEliminar_Click"/>
                    <Button x:Name="btnModificar" Content="✏️  Modificar" Style="{StaticResource MenuButtonStyle}" Click="btnModificar_Click"/>

                    <Separator Background="#374151" Margin="10,20"/>

                    <Button x:Name="btnMCP" Content="🤖  Asistente IA" 
                            Style="{StaticResource MenuButtonStyle}" 
                            Foreground="#C084FC" 
                            FontWeight="Bold"
                            ToolTip="Abrir asistente inteligente (MCP)"
                            Click="btnMCP_Click"/>

                    <Button x:Name="btnMigrar" Content="☁️  Migrar CSV a BD" 
                            Style="{StaticResource MenuButtonStyle}" 
                            Foreground="#FBBF24" 
                            ToolTip="Lee el CSV local y lo sube a MySQL"
                            Click="btnMigrar_Click"/>
                </StackPanel>

                <Border Grid.Row="1" BorderBrush="#374151" BorderThickness="0,1,0,0" Padding="15,20">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <Border Grid.Column="0" Width="35" Height="35" CornerRadius="20" Background="#374151" Margin="0,0,12,0">
                            <TextBlock Text="👤" Foreground="White" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="16"/>
                        </Border>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <TextBlock x:Name="txtNombreUsuario" Text="Invitado" Foreground="White" FontWeight="SemiBold" FontSize="14"/>
                            <TextBlock Text="Conectado a API" Foreground="#10B981" FontSize="11"/>
                        </StackPanel>

                        <Button x:Name="btnCerrarSesion" Grid.Column="2" 
                                Click="btnCerrarSesion_Click"
                                ToolTip="Cerrar Sesión"
                                Background="Transparent" BorderThickness="0" Cursor="Hand"
                                Width="30" Height="30">
                            <Button.Content>
                                <TextBlock Text="❌" FontSize="12" Foreground="#EF4444" FontWeight="Bold"/>
                            </Button.Content>
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Border Background="{TemplateBinding Background}" CornerRadius="15">
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </Border>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Background" Value="#374151"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </Grid>
                </Border>
            </Grid>
        </Border>

        <Grid Grid.Column="1" Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Margin="0,0,0,20">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="300"/>
                </Grid.ColumnDefinitions>

                <StackPanel>
                    <TextBlock Text="Listado de Videojuegos" FontSize="24" FontWeight="SemiBold" Foreground="#111827"/>
                    <TextBlock Text="Datos obtenidos desde MySQL" FontSize="12" Foreground="#6B7280" Margin="0,5,0,0"/>
                </StackPanel>

                <Border Grid.Column="1" Background="White" CornerRadius="8">
                    <Border.Effect>
                        <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="1" BlurRadius="5" Opacity="0.1"/>
                    </Border.Effect>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="40"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="txtBuscar" ToolTip="Buscar por título..." Style="{StaticResource SearchTextBoxStyle}" BorderThickness="0" TextChanged="txtBuscar_TextChanged"/>
                        <Path Grid.Column="1" Data="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" Fill="#9CA3AF" Stretch="Uniform" Width="18" Height="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Grid>
                </Border>
            </Grid>

            <Border Grid.Row="1" Background="White" CornerRadius="8" ClipToBounds="True">
                <Border.Effect>
                    <DropShadowEffect Color="#000000" Direction="270" ShadowDepth="1" BlurRadius="8" Opacity="0.05"/>
                </Border.Effect>

                <ListView x:Name="lvVideojuegos" BorderThickness="0" FontSize="13">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="Título" Width="250" DisplayMemberBinding="{Binding Title}"/>
                            <GridViewColumn Header="Género" Width="200" DisplayMemberBinding="{Binding Genres}"/>
                            <GridViewColumn Header="Fecha Salida" Width="120" DisplayMemberBinding="{Binding ReleaseDate}"/>
                            <GridViewColumn Header="Equipo" Width="150" DisplayMemberBinding="{Binding Team}"/>
                            <GridViewColumn Header="Rating" Width="60" DisplayMemberBinding="{Binding Rating}"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </Border>
        </Grid>
    </Grid>
</Window>